#import <Foundation/Foundation.h>

#import "RWNngSolver.h"

int printgrid(const nng_cell *grid, size_t width, size_t height,
              const char *solid, const char *dot,
              const char *blank)
{
    size_t row, col, count = 0;
    
    for (row = 0; row < height; row++) {
        for (col = 0; col < width; col++) {
            int c = grid[col + row * width];
            
            count += printf( "%s", c == nng_SOLID ? solid :
                            c == nng_DOT ? dot : blank);
        }
        printf("|\n");
        count++;
    }
    return count;
}


int main (int argc, const char * argv[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    NSLog(@"Hesllo world!");


    char p_simple[] = "111000111";
    char p_arman[] = "5550000000555000222055500025200000002220000000060000707006600007006600440700060044770006009999999999";
    char p_utmore[] = "000001100110111111000000000111111111111111111000001100110111111000000000000000011111111111000001100110001100000000000000000000000111111001111111111111111110000000000000000000000111000001100110001100000000000111111111111000011000001100110001100000000011100000000011110001000001111110001100000001110011111110000011100000000111110001100000111000011111110111000110000000000000000000001100000111111110111110011000000000000000000011101001111111110111111001000000000000000000010011011111111100111111000000011111110000000110110111111111001111111010001111111111100001101100111111111011111111011011111111111110001000001111111110011111110011111111111111111001011101111111110111111110111111001111100111011011101111111100111111100111111000111000111010111101111111101111111101111111100101001111010111001111111001111111001111111111101111111010000011111111011111110011111011111000111110010110000000111011111110111111001111000111100010110011110000000111100111111001111111111100010110111111111110000001111110001010101010100010110111111111111111100001100001101010101100010110110000111111111111100001001111111111000010110000110000011111111111011000111111111000011010111111111000001111110011100001111100000001010011111111111100000100111110000000000000001001011111111111111110001111111000000000000001101011111111111111111101111111100000000000000110011111111111111111001110111110000000000000010000000111111111111011101111111100000000000011001110000111111111011001111111111100000000001100111110000111110010011111111111111110000000111001111110000010001110111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000111111111111111111000001100011111111100111000";
    
    NSString *puzzle = [[NSString alloc]    initWithUTF8String:p_utmore];
    RWNngSolver* s = [[RWNngSolver alloc] init];
    
    NSString *bsolved = [s puzzleIsLogicallySolvable:puzzle];        

    if (bsolved) {
        NSLog(@"solvable!");
        printgrid([bsolved UTF8String], sqrt([puzzle length]), sqrt([puzzle length]), "#", "-", " ");
    }
    else NSLog(@"unsolvable!");
    
    [pool drain];
    
    return 0;
}
